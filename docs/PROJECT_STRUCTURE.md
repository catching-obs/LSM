# í”„ë¡œì íŠ¸ íŒŒì¼ êµ¬ì¡° ì„¤ëª…

## ê°œìš”

ì´ ë¬¸ì„œëŠ” Hybrid Media Engine í”„ë¡œì íŠ¸ì˜ ì „ì²´ íŒŒì¼ êµ¬ì¡°ì™€ ê° ë””ë ‰í† ë¦¬ ë° íŒŒì¼ì˜ ì—­í• ì„ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

## ì „ì²´ êµ¬ì¡° íŠ¸ë¦¬

```
project-root/
â”‚
â”œâ”€â”€ CMakeLists.txt               # ë£¨íŠ¸ CMake ë¹Œë“œ ì„¤ì •
â”œâ”€â”€ Cargo.toml                   # Rust ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì •
â”œâ”€â”€ README.md                    # í”„ë¡œì íŠ¸ ì†Œê°œ ë° ì‚¬ìš©ë²•
â”œâ”€â”€ build.sh                     # ìë™ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ .gitignore                   # Git ì œì™¸ íŒŒì¼ ëª©ë¡
â”‚
â”œâ”€â”€ docs/                        # ë¬¸ì„œ ë””ë ‰í† ë¦¬
â”‚   â”œâ”€â”€ ARCHITECTURE.md          # ì•„í‚¤í…ì²˜ ì„¤ê³„ ë¬¸ì„œ
â”‚   â””â”€â”€ PROJECT_STRUCTURE.md     # ì´ ë¬¸ì„œ
â”‚
â”œâ”€â”€ core/                        # C++ í•µì‹¬ ì—”ì§„
â”‚   â”œâ”€â”€ CMakeLists.txt           # Core ë¹Œë“œ ì„¤ì •
â”‚   â””â”€â”€ utils/                   # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ logger.h             # ë¡œê±° í—¤ë”
â”‚       â”œâ”€â”€ logger.cpp           # ë¡œê±° êµ¬í˜„
â”‚       â”œâ”€â”€ memory_pool.h        # ë©”ëª¨ë¦¬ í’€ í—¤ë”
â”‚       â””â”€â”€ memory_pool.cpp      # ë©”ëª¨ë¦¬ í’€ êµ¬í˜„
â”‚
â”œâ”€â”€ rust-modules/                # Rust ëª¨ë“ˆ ì›Œí¬ìŠ¤í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ bindings/                # (ë¹„ì–´ìˆìŒ - í–¥í›„ í™•ì¥ìš©)
â”‚   â”‚
â”‚   â”œâ”€â”€ audio-dsp/               # ì˜¤ë””ì˜¤ DSP ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ Cargo.toml           # audio-dsp íŒ¨í‚¤ì§€ ì„¤ì •
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ lib.rs           # FFI ì¸í„°í˜ì´ìŠ¤ ì •ì˜
â”‚   â”‚       â””â”€â”€ mixer.rs         # ì˜¤ë””ì˜¤ ë¯¹ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚
â”‚   â””â”€â”€ video-encoder/           # ë¹„ë””ì˜¤ ì¸ì½”ë” ëª¨ë“ˆ
â”‚       â”œâ”€â”€ Cargo.toml           # video-encoder íŒ¨í‚¤ì§€ ì„¤ì •
â”‚       â””â”€â”€ src/
â”‚           â”œâ”€â”€ lib.rs           # FFI ì¸í„°í˜ì´ìŠ¤ ì •ì˜
â”‚           â””â”€â”€ pipeline.rs      # ì¸ì½”ë”© íŒŒì´í”„ë¼ì¸ ë¡œì§
â”‚
â”œâ”€â”€ bindings/                    # FFI ë°”ì¸ë”© ë ˆì´ì–´
â”‚   â”œâ”€â”€ cpp_to_rust/             # C++ì—ì„œ Rust í˜¸ì¶œ
â”‚   â”‚   â”œâ”€â”€ CMakeLists.txt       # ë°”ì¸ë”© ë¹Œë“œ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ audio_ffi.h          # ì˜¤ë””ì˜¤ FFI C í—¤ë”
â”‚   â”‚   â””â”€â”€ video_ffi.h          # ë¹„ë””ì˜¤ FFI C í—¤ë”
â”‚   â”‚
â”‚   â””â”€â”€ rust_to_cpp/             # Rustì—ì„œ C++ í˜¸ì¶œ (ì½œë°±ìš©)
â”‚       â””â”€â”€ lib.rs               # C++ ì½œë°± ì¸í„°í˜ì´ìŠ¤
â”‚
â”œâ”€â”€ app/                         # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ CMakeLists.txt           # ì•± ë¹Œë“œ ì„¤ì •
â”‚   â””â”€â”€ main.cpp                 # ë°ëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”ì¸
â”‚
â”œâ”€â”€ tests/                       # í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬
â”‚   â”œâ”€â”€ cpp/                     # C++ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ CMakeLists.txt       # C++ í…ŒìŠ¤íŠ¸ ë¹Œë“œ ì„¤ì •
â”‚   â”‚   â””â”€â”€ test_core.cpp        # Core ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
â”‚   â”‚
â”‚   â””â”€â”€ rust/                    # Rust í…ŒìŠ¤íŠ¸ (ë¹„ì–´ìˆìŒ)
â”‚                                # Rust í…ŒìŠ¤íŠ¸ëŠ” ê° ëª¨ë“ˆ ë‚´ë¶€ì— ìˆìŒ
â”‚
â”œâ”€â”€ build/                       # CMake ë¹Œë“œ ì¶œë ¥ ë””ë ‰í† ë¦¬ (ìë™ìƒì„±)
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ media_app            # ì‹¤í–‰ íŒŒì¼
â”‚   â””â”€â”€ tests/
â”‚       â””â”€â”€ test_core            # C++ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ íŒŒì¼
â”‚
â””â”€â”€ target/                      # Cargo ë¹Œë“œ ì¶œë ¥ ë””ë ‰í† ë¦¬ (ìë™ìƒì„±)
    â””â”€â”€ release/
        â”œâ”€â”€ libaudio_dsp.a       # ì˜¤ë””ì˜¤ DSP ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬
        â””â”€â”€ libvideo_encoder.a   # ë¹„ë””ì˜¤ ì¸ì½”ë” ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬
```

---

## ë””ë ‰í† ë¦¬ ë° íŒŒì¼ ìƒì„¸ ì„¤ëª…

### ğŸ“ ë£¨íŠ¸ ë””ë ‰í† ë¦¬

#### `CMakeLists.txt`
- **ì—­í• **: C++ í”„ë¡œì íŠ¸ì˜ ìµœìƒìœ„ ë¹Œë“œ ì„¤ì • íŒŒì¼
- **ì£¼ìš” ë‚´ìš©**:
  - C++17 í‘œì¤€ ì„¤ì •
  - ë¹Œë“œ ì˜µì…˜ (BUILD_TESTS, BUILD_APP)
  - ì„œë¸Œ ë””ë ‰í† ë¦¬ ì¶”ê°€ (core, bindings, app, tests)
  - Rust ë¼ì´ë¸ŒëŸ¬ë¦¬ ë§í¬ ë””ë ‰í† ë¦¬ ì„¤ì •
- **ì‚¬ìš©**: `cmake ..` ëª…ë ¹ìœ¼ë¡œ ë¹Œë“œ ì‹œìŠ¤í…œ ìƒì„±

#### `Cargo.toml`
- **ì—­í• **: Rust ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì • íŒŒì¼
- **ì£¼ìš” ë‚´ìš©**:
  - ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë©¤ë²„ ì •ì˜ (audio-dsp, video-encoder)
  - ê³µìœ  ì˜ì¡´ì„± ê´€ë¦¬ (crossbeam)
  - ê³µí†µ ë©”íƒ€ë°ì´í„° (ë²„ì „, ì—ë””ì…˜, ì €ì)
- **ì‚¬ìš©**: `cargo build` ëª…ë ¹ìœ¼ë¡œ ëª¨ë“  Rust ëª¨ë“ˆ ë¹Œë“œ

#### `README.md`
- **ì—­í• **: í”„ë¡œì íŠ¸ ì†Œê°œ ë° ì‚¬ìš© ê°€ì´ë“œ
- **ì£¼ìš” ë‚´ìš©**:
  - í”„ë¡œì íŠ¸ ê°œìš”
  - ë¹Œë“œ ë°©ë²•
  - ì‚¬ìš© ì˜ˆì œ
  - ì•„í‚¤í…ì²˜ íŠ¹ì§•

#### `build.sh`
- **ì—­í• **: ì „ì²´ í”„ë¡œì íŠ¸ ìë™ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸
- **ì‹¤í–‰ ìˆœì„œ**:
  1. Rust ëª¨ë“ˆ ë¹Œë“œ (`cargo build --release`)
  2. CMake í”„ë¡œì íŠ¸ ì„¤ì • (`cmake ..`)
  3. C++ í”„ë¡œì íŠ¸ ë¹Œë“œ (`cmake --build .`)
- **ì‚¬ìš©**: `./build.sh`

#### `.gitignore`
- **ì—­í• **: Gitì—ì„œ ì œì™¸í•  íŒŒì¼/ë””ë ‰í† ë¦¬ ì§€ì •
- **ì œì™¸ í•­ëª©**:
  - ë¹Œë“œ ì¶œë ¥ (build/, target/)
  - IDE ì„¤ì • (.vscode/, .idea/)
  - ë°”ì´ë„ˆë¦¬ íŒŒì¼ (*.o, *.a, *.exe ë“±)

---

### ğŸ“ docs/ - ë¬¸ì„œ

#### `ARCHITECTURE.md`
- **ì—­í• **: í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ ì„¤ê³„ ë¬¸ì„œ
- **ì£¼ìš” ë‚´ìš©**:
  - ì„¤ê³„ ì² í•™ (ì™œ C++ì™€ Rustë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ”ê°€)
  - ëª¨ë“ˆ ì„¤ê³„ ì›ì¹™
  - FFI ì„¤ê³„ íŒ¨í„´
  - ë©”ëª¨ë¦¬ ê´€ë¦¬ ì „ëµ
  - ë™ì‹œì„± ëª¨ë¸
  - ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
  - ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

#### `PROJECT_STRUCTURE.md`
- **ì—­í• **: ì´ ë¬¸ì„œ (íŒŒì¼ êµ¬ì¡° ì„¤ëª…)

---

### ğŸ“ core/ - C++ í•µì‹¬ ì—”ì§„

#### `core/CMakeLists.txt`
- **ì—­í• **: Core ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹Œë“œ ì„¤ì •
- **ì£¼ìš” ë‚´ìš©**:
  - `core_utils` ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒì„±
  - ì†ŒìŠ¤ íŒŒì¼ ëª©ë¡ (logger.cpp, memory_pool.cpp)
  - ì¸í´ë£¨ë“œ ë””ë ‰í† ë¦¬ ì„¤ì •

#### `core/utils/logger.h`
- **ì—­í• **: ë¡œê¹… ì‹œìŠ¤í…œ ì¸í„°í˜ì´ìŠ¤
- **ì£¼ìš” í´ë˜ìŠ¤**: `Logger` (ì‹±ê¸€í†¤ íŒ¨í„´)
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ë¡œê·¸ ë ˆë²¨ ì„¤ì • (DEBUG, INFO, WARNING, ERROR)
  - íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ ë¡œê·¸ ì¶œë ¥
  - ìŠ¤ë ˆë“œ ì•ˆì „ (ì‹±ê¸€í†¤)

#### `core/utils/logger.cpp`
- **ì—­í• **: ë¡œê¹… ì‹œìŠ¤í…œ êµ¬í˜„
- **êµ¬í˜„ ë‚´ìš©**:
  - ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬
  - ë¡œê·¸ ë ˆë²¨ë³„ í•„í„°ë§
  - ISO 8601 í˜•ì‹ íƒ€ì„ìŠ¤íƒ¬í”„

#### `core/utils/memory_pool.h`
- **ì—­í• **: ë©”ëª¨ë¦¬ í’€ ì¸í„°í˜ì´ìŠ¤
- **ì£¼ìš” í´ë˜ìŠ¤**: `MemoryPool`
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ê³ ì • í¬ê¸° ë¸”ë¡ í• ë‹¹/í•´ì œ
  - ë©”ëª¨ë¦¬ ì¬ì‚¬ìš©ìœ¼ë¡œ ì„±ëŠ¥ í–¥ìƒ
  - ë©”ëª¨ë¦¬ ë‹¨í¸í™” ë°©ì§€

#### `core/utils/memory_pool.cpp`
- **ì—­í• **: ë©”ëª¨ë¦¬ í’€ êµ¬í˜„
- **êµ¬í˜„ ë‚´ìš©**:
  - ì—°ì†ëœ ë©”ëª¨ë¦¬ ë¸”ë¡ ì‚¬ì „ í• ë‹¹
  - í”„ë¦¬ ë¦¬ìŠ¤íŠ¸ ê¸°ë°˜ ê´€ë¦¬
  - í¬ì¸í„° ìœ íš¨ì„± ê²€ì¦

---

### ğŸ“ rust-modules/ - Rust ëª¨ë“ˆ

#### `rust-modules/audio-dsp/`

##### `Cargo.toml`
- **ì—­í• **: audio-dsp íŒ¨í‚¤ì§€ ì„¤ì •
- **ì£¼ìš” ë‚´ìš©**:
  - ë¼ì´ë¸ŒëŸ¬ë¦¬ íƒ€ì…: staticlib, cdylib
  - ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê³µìœ  ì„¤ì • ì‚¬ìš©
  - ìµœì†Œ ì˜ì¡´ì„± (ìˆœìˆ˜ ë¡œì§ ëª¨ë“ˆ)

##### `src/lib.rs`
- **ì—­í• **: FFI ê²½ê³„ ë ˆì´ì–´
- **ì£¼ìš” í•¨ìˆ˜**:
  - `audio_mixer_create()`: ë¯¹ì„œ ìƒì„± (Cì—ì„œ í˜¸ì¶œ ê°€ëŠ¥)
  - `audio_mixer_destroy()`: ë¯¹ì„œ íŒŒê´´
  - `audio_mixer_mix()`: ì˜¤ë””ì˜¤ ë¯¹ì‹±
  - `audio_mixer_set_channel_volume()`: ë³¼ë¥¨ ì¡°ì ˆ
- **íŠ¹ì§•**:
  - `#[no_mangle]` + `extern "C"`: C ABI í˜¸í™˜
  - ë¶ˆíˆ¬ëª… í¬ì¸í„° íŒ¨í„´ ì‚¬ìš©
  - ì•ˆì „ì„± ê²€ì¦ (null ì²´í¬)

##### `src/mixer.rs`
- **ì—­í• **: ì˜¤ë””ì˜¤ ë¯¹ì‹± ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- **ì£¼ìš” êµ¬ì¡°ì²´**: `AudioMixer`
- **ì£¼ìš” ë©”ì„œë“œ**:
  - `new()`: ì±„ë„ ìˆ˜ ì§€ì •í•˜ì—¬ ìƒì„±
  - `mix()`: ì—¬ëŸ¬ ì±„ë„ì„ í•˜ë‚˜ë¡œ ë¯¹ì‹±
  - `set_channel_volume()`: ì±„ë„ë³„ ë³¼ë¥¨ ì„¤ì •
- **ì•Œê³ ë¦¬ì¦˜**:
  - ê° ì±„ë„ì˜ ìƒ˜í”Œì„ ë³¼ë¥¨ ê°€ì¤‘ì¹˜ë¡œ í•©ì‚°
  - í´ë¦¬í•‘ ë°©ì§€ (-1.0 ~ 1.0 ë²”ìœ„ ì œí•œ)
- **í…ŒìŠ¤íŠ¸**: 4ê°œì˜ ìœ ë‹› í…ŒìŠ¤íŠ¸ í¬í•¨

---

#### `rust-modules/video-encoder/`

##### `Cargo.toml`
- **ì—­í• **: video-encoder íŒ¨í‚¤ì§€ ì„¤ì •
- **ì£¼ìš” ë‚´ìš©**:
  - ë¼ì´ë¸ŒëŸ¬ë¦¬ íƒ€ì…: staticlib, cdylib
  - ì˜ì¡´ì„±: crossbeam (ë©€í‹°ìŠ¤ë ˆë”©)
  - FFmpeg í†µí•© ì¤€ë¹„ (ì£¼ì„ ì²˜ë¦¬)

##### `src/lib.rs`
- **ì—­í• **: FFI ê²½ê³„ ë ˆì´ì–´
- **ì£¼ìš” íƒ€ì…**:
  - `CEncoderConfig`: C í˜¸í™˜ ì„¤ì • êµ¬ì¡°ì²´
- **ì£¼ìš” í•¨ìˆ˜**:
  - `encoder_create()`: ì¸ì½”ë” ìƒì„±
  - `encoder_destroy()`: ì¸ì½”ë” íŒŒê´´
  - `encoder_start()`: ì¸ì½”ë”© ì‹œì‘
  - `encoder_stop()`: ì¸ì½”ë”© ì¤‘ì§€
  - `encoder_submit_frame()`: í”„ë ˆì„ ì œì¶œ
  - `encoder_get_encoded_frames()`: í†µê³„ ì¡°íšŒ

##### `src/pipeline.rs`
- **ì—­í• **: ë¹„ë™ê¸° ì¸ì½”ë”© íŒŒì´í”„ë¼ì¸
- **ì£¼ìš” êµ¬ì¡°ì²´**:
  - `EncoderPipeline`: ì¸ì½”ë”© íŒŒì´í”„ë¼ì¸ ê´€ë¦¬
  - `EncoderConfig`: ì¸ì½”ë” ì„¤ì •
  - `FrameData`: í”„ë ˆì„ ë°ì´í„°
- **ë™ì‘ ì›ë¦¬**:
  1. Bounded Channelë¡œ í”„ë ˆì„ í ê´€ë¦¬ (64 í”„ë ˆì„ ë²„í¼)
  2. Worker Threadì—ì„œ ë¹„ë™ê¸° ì¸ì½”ë”©
  3. Atomic ë³€ìˆ˜ë¡œ í†µê³„ ìˆ˜ì§‘
- **íŠ¹ì§•**:
  - ë°±í”„ë ˆì…” ì œì–´ (ì±„ë„ ê°€ë“ ì°¨ë©´ ëŒ€ê¸°)
  - ìš°ì•„í•œ ì¢…ë£Œ (stop ì‹œ ì±„ë„ ë‹«ê¸°)
  - RAII íŒ¨í„´ (Drop íŠ¸ë ˆì‡)
- **í…ŒìŠ¤íŠ¸**: 3ê°œì˜ ìœ ë‹› í…ŒìŠ¤íŠ¸ í¬í•¨

---

### ğŸ“ bindings/ - FFI ë°”ì¸ë”©

#### `bindings/cpp_to_rust/`

##### `CMakeLists.txt`
- **ì—­í• **: ë°”ì¸ë”© ë ˆì´ì–´ ë¹Œë“œ ì„¤ì •
- **ë‚´ìš©**: í—¤ë” ì „ìš© ì¸í„°í˜ì´ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬

##### `audio_ffi.h`
- **ì—­í• **: ì˜¤ë””ì˜¤ DSP FFI C í—¤ë”
- **ì£¼ìš” ì„ ì–¸**:
  - `AudioMixer` ë¶ˆíˆ¬ëª… íƒ€ì…
  - C í•¨ìˆ˜ í”„ë¡œí† íƒ€ì…
- **íŠ¹ì§•**:
  - C/C++ í˜¸í™˜ (`extern "C"`)
  - íƒ€ì… ì•ˆì „ì„± (ë¶ˆíˆ¬ëª… í¬ì¸í„°)

##### `video_ffi.h`
- **ì—­í• **: ë¹„ë””ì˜¤ ì¸ì½”ë” FFI C í—¤ë”
- **ì£¼ìš” ì„ ì–¸**:
  - `EncoderPipeline` ë¶ˆíˆ¬ëª… íƒ€ì…
  - `CEncoderConfig` ì„¤ì • êµ¬ì¡°ì²´
  - C í•¨ìˆ˜ í”„ë¡œí† íƒ€ì…

---

#### `bindings/rust_to_cpp/`

##### `lib.rs`
- **ì—­í• **: Rustì—ì„œ C++ í˜¸ì¶œ (ì½œë°± ì¸í„°í˜ì´ìŠ¤)
- **ì£¼ìš” ë‚´ìš©**:
  - `LogCallback` íƒ€ì… ì •ì˜
  - C++ ë¡œê¹… ì½œë°± ë“±ë¡/í˜¸ì¶œ
  - í–¥í›„ í™•ì¥ìš© í”Œë ˆì´ìŠ¤í™€ë”

---

### ğŸ“ app/ - ì• í”Œë¦¬ì¼€ì´ì…˜

#### `app/CMakeLists.txt`
- **ì—­í• **: ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ ì„¤ì •
- **ì£¼ìš” ë‚´ìš©**:
  - `media_app` ì‹¤í–‰ íŒŒì¼ ìƒì„±
  - Rust ë¼ì´ë¸ŒëŸ¬ë¦¬ ê²½ë¡œ ì„¤ì •
  - ë§í‚¹ ì„¤ì •:
    - Core ìœ í‹¸ë¦¬í‹°
    - Rust ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬
    - í”Œë«í¼ë³„ ì‹œìŠ¤í…œ ë¼ì´ë¸ŒëŸ¬ë¦¬ (pthread, dl, m)

#### `app/main.cpp`
- **ì—­í• **: ë°ëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”ì¸ í”„ë¡œê·¸ë¨
- **ì£¼ìš” í•¨ìˆ˜**:
  - `demonstrate_audio_mixing()`: ì˜¤ë””ì˜¤ ë¯¹ì‹± ë°ëª¨
    - 2ì±„ë„ ë¯¹ì„œ ìƒì„±
    - ë³¼ë¥¨ ì¡°ì ˆ í…ŒìŠ¤íŠ¸
    - ê²°ê³¼ ê²€ì¦
  - `demonstrate_video_encoding()`: ë¹„ë””ì˜¤ ì¸ì½”ë”© ë°ëª¨
    - 1920x1080@30fps ì¸ì½”ë” ìƒì„±
    - 10ê°œ í”„ë ˆì„ ì œì¶œ
    - í†µê³„ ì¶œë ¥
  - `main()`: ì§„ì…ì 
    - ë¡œê±° ì´ˆê¸°í™”
    - ë°ëª¨ ì‹¤í–‰
    - ì˜ˆì™¸ ì²˜ë¦¬
- **íŠ¹ì§•**:
  - FFIë¥¼ í†µí•œ Rust ëª¨ë“ˆ í˜¸ì¶œ
  - RAII íŒ¨í„´ (ë¦¬ì†ŒìŠ¤ ì •ë¦¬)
  - ì—ëŸ¬ ì²˜ë¦¬

---

### ğŸ“ tests/ - í…ŒìŠ¤íŠ¸

#### `tests/cpp/`

##### `CMakeLists.txt`
- **ì—­í• **: C++ í…ŒìŠ¤íŠ¸ ë¹Œë“œ ì„¤ì •
- **ë‚´ìš©**:
  - `test_core` í…ŒìŠ¤íŠ¸ ì‹¤í–‰ íŒŒì¼ ìƒì„±
  - CTest í†µí•©

##### `test_core.cpp`
- **ì—­í• **: Core ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
- **í…ŒìŠ¤íŠ¸ í•¨ìˆ˜**:
  - `test_logger()`: ë¡œê±° ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
  - `test_memory_pool()`: ë©”ëª¨ë¦¬ í’€ í…ŒìŠ¤íŠ¸
    - ì´ˆê¸° ìƒíƒœ
    - í• ë‹¹/í•´ì œ
    - ê³ ê°ˆ ì²˜ë¦¬
- **ê²€ì¦**: assert ë§¤í¬ë¡œ ì‚¬ìš©

---

#### `tests/rust/`
- **ìƒíƒœ**: ë¹„ì–´ìˆìŒ
- **ì´ìœ **: Rust í…ŒìŠ¤íŠ¸ëŠ” ê° ëª¨ë“ˆì˜ `src/` ë‚´ë¶€ì— ì‘ì„±ë¨
  - `audio-dsp/src/mixer.rs`: 4ê°œ í…ŒìŠ¤íŠ¸
  - `video-encoder/src/pipeline.rs`: 3ê°œ í…ŒìŠ¤íŠ¸
- **ì‹¤í–‰**: `cargo test`

---

### ğŸ“ build/ - ë¹Œë“œ ì¶œë ¥ (ìë™ ìƒì„±)

- **ìƒì„±**: `cmake ..` ì‹¤í–‰ ì‹œ ìë™ ìƒì„±
- **ë‚´ìš©**:
  - CMake ìºì‹œ ë° ë¹Œë“œ íŒŒì¼
  - `app/media_app`: ì‹¤í–‰ íŒŒì¼
  - `tests/test_core`: C++ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ íŒŒì¼
- **.gitignore**: Gitì—ì„œ ì œì™¸

---

### ğŸ“ target/ - Rust ë¹Œë“œ ì¶œë ¥ (ìë™ ìƒì„±)

- **ìƒì„±**: `cargo build` ì‹¤í–‰ ì‹œ ìë™ ìƒì„±
- **ì£¼ìš” íŒŒì¼**:
  - `release/libaudio_dsp.a`: ì˜¤ë””ì˜¤ DSP ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬
  - `release/libvideo_encoder.a`: ë¹„ë””ì˜¤ ì¸ì½”ë” ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬
  - `debug/`: ë””ë²„ê·¸ ë¹Œë“œ ì¶œë ¥
- **.gitignore**: Gitì—ì„œ ì œì™¸

---

## ë¹Œë“œ í”Œë¡œìš°

### 1. Rust ëª¨ë“ˆ ë¹Œë“œ

```bash
cd rust-modules
cargo build --release
```

**ì¶œë ¥**:
- `/target/release/libaudio_dsp.a`
- `/target/release/libvideo_encoder.a`

---

### 2. C++ í”„ë¡œì íŠ¸ ë¹Œë“œ

```bash
mkdir build && cd build
cmake ..
cmake --build .
```

**ë‹¨ê³„**:
1. CMakeê°€ `CMakeLists.txt` ì½ê¸°
2. Rust ë¼ì´ë¸ŒëŸ¬ë¦¬ ìœ„ì¹˜ ì°¾ê¸°
3. Core ë¼ì´ë¸ŒëŸ¬ë¦¬ ì»´íŒŒì¼
4. ì•± ì»´íŒŒì¼ ë° ë§í‚¹
5. í…ŒìŠ¤íŠ¸ ì»´íŒŒì¼

**ì¶œë ¥**:
- `build/app/media_app`
- `build/tests/test_core`

---

## ì˜ì¡´ì„± ê´€ê³„

```
media_app
  â”œâ”€> core_utils (C++ ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬)
  â”œâ”€> libaudio_dsp.a (Rust ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬)
  â”œâ”€> libvideo_encoder.a (Rust ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬)
  â””â”€> ì‹œìŠ¤í…œ ë¼ì´ë¸ŒëŸ¬ë¦¬ (pthread, dl, m)

libaudio_dsp.a
  â””â”€> (ì˜ì¡´ì„± ì—†ìŒ - ìˆœìˆ˜ ë¡œì§)

libvideo_encoder.a
  â””â”€> crossbeam (Rust í¬ë ˆì´íŠ¸)
```

---

## íŒŒì¼ ìˆ˜ì • ì‹œ ì˜í–¥ ë²”ìœ„

| ìˆ˜ì • íŒŒì¼ | ì¬ë¹Œë“œ í•„ìš” | ì˜í–¥ ë²”ìœ„ |
|----------|-----------|----------|
| `rust-modules/audio-dsp/src/*.rs` | `cargo build` | libaudio_dsp.a, media_app |
| `rust-modules/video-encoder/src/*.rs` | `cargo build` | libvideo_encoder.a, media_app |
| `core/utils/*.cpp` | `cmake --build .` | core_utils, media_app, test_core |
| `bindings/cpp_to_rust/*.h` | `cmake --build .` | media_app |
| `app/main.cpp` | `cmake --build .` | media_appë§Œ |
| `CMakeLists.txt` | `cmake ..` ì¬ì‹¤í–‰ | ì „ì²´ ë¹Œë“œ ì‹œìŠ¤í…œ |

---

## í™•ì¥ ê°€ì´ë“œ

### ìƒˆë¡œìš´ Rust ëª¨ë“ˆ ì¶”ê°€

1. **ë””ë ‰í† ë¦¬ ìƒì„±**:
   ```bash
   mkdir -p rust-modules/new-module/src
   ```

2. **Cargo.toml ì‘ì„±**:
   ```toml
   [package]
   name = "new-module"
   version.workspace = true
   edition.workspace = true

   [lib]
   crate-type = ["staticlib"]
   ```

3. **ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— ì¶”ê°€**:
   ```toml
   # ë£¨íŠ¸ Cargo.toml
   [workspace]
   members = [
       "rust-modules/audio-dsp",
       "rust-modules/video-encoder",
       "rust-modules/new-module",  # ì¶”ê°€
   ]
   ```

4. **FFI í—¤ë” ì‘ì„±**:
   ```c
   // bindings/cpp_to_rust/new_module_ffi.h
   ```

5. **CMake ë§í‚¹ ì¶”ê°€**:
   ```cmake
   # app/CMakeLists.txt
   target_link_libraries(media_app
       ${RUST_LIB_DIR}/libnew_module.a
   )
   ```

---

### ìƒˆë¡œìš´ C++ ëª¨ë“ˆ ì¶”ê°€

1. **ë””ë ‰í† ë¦¬ ìƒì„±**:
   ```bash
   mkdir -p core/new-module
   ```

2. **CMakeLists.txt ì‘ì„±**:
   ```cmake
   # core/CMakeLists.txt
   add_library(new_module STATIC
       new-module/file.cpp
   )
   ```

3. **ë£¨íŠ¸ì—ì„œ ì¶”ê°€**:
   ```cmake
   # CMakeLists.txt
   add_subdirectory(core/new-module)
   ```

---

## ìš”ì•½

ì´ í”„ë¡œì íŠ¸ëŠ” **ê³„ì¸µì ì´ê³  ëª¨ë“ˆí™”ëœ êµ¬ì¡°**ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤:

- **C++ Core**: ê³µí†µ ìœ í‹¸ë¦¬í‹° ë° í”Œë«í¼ ì¸í„°í˜ì´ìŠ¤
- **Rust Modules**: ê³ ì„±ëŠ¥ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ì˜¤ë””ì˜¤, ë¹„ë””ì˜¤)
- **FFI Bindings**: ì–‘ë°©í–¥ ì–¸ì–´ ê°„ í†µì‹ 
- **Application**: í†µí•© ë° ë°ëª¨
- **Tests**: ê° ë ˆì´ì–´ë³„ ê²€ì¦

ì´ êµ¬ì¡°ëŠ” **í™•ì¥ì„±**, **ìœ ì§€ë³´ìˆ˜ì„±**, **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**ì„ ëª¨ë‘ ê³ ë ¤í•˜ì—¬ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
